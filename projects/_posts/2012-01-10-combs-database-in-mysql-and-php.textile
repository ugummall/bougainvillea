--- 
layout: post
title: Catacombs Database
subcat: software
image: /img/thumbs/combsdb.png
description: Building a database to track claimed servers.
---

The Computer Action Team at Portland State runs an annual sysadmin training program that includes four hours weekly help desk duty, four hours weekly Friday night lectures, and tiered access to actual college servers. The CATacombs are a training room full of servers where new CATs select a box and start familiarizing themselves with services by installing them from scratch. 

Students have the choice of Windows or Unix/Linux. With upwards of seventy people in an annual program, the catacombs can be a confusing and complicated place to keep track of. Boxes are frequently abandoned as students move on to bigger and better things. The combs database is a MySQL db with a PHP web interface to help the combs denizens organize themselves.

I hosted the database on my own server instance because the catacombs are always in flux and boxes are constantly reloaded. I got together with the current combs elf to figure out how best to complement the documentation being written for 2012's combs group and came away with a few requirements. 

First, there needed to be a splash page with instructions, on the off chance that somebody would read it. I took it as a chance to flex my documentation-writing and sarcasm muscles, which were out of shape.

 <img src="https://jenner.smugmug.com/JennerHanniNet/i-gCX43Fw/0/L/combs_intro-L.png">
<br />
Second, the combs had two VLANs and needed two separate tables. I called the tables for these VLANs 'combs_vlan_noobz' and 'combs_vlan_projects'. I made the two tables and indexed them by IP address, then decided to have a single combs login and password with the ability to update but not add or remove any of items. That way the list would be consistent. 

 <img src="https://jenner.smugmug.com/JennerHanniNet/i-Bw89qJv/0/L/combs_vlan-L.png">
<br />
Third, this being a training ground for <s>hackers</s> baby sysadmins keen on proving themselves, I did my best to sanitize my inputs and then invited some of my peers to mess with it. They were mostly unsuccessful and I made corrections where necessary.

 <img src="https://jenner.smugmug.com/JennerHanniNet/i-SXjzHSM/0/L/combs_form-L.png">
<br />
Once the tables were built and the user accounts created, I built the web front-end using HTML and PHP. I password-protected the entire directory using .htaccess so only combs residents could see it. I whipped up some very simple custom CSS and released the database to the wilds.

It hasn't been used much recently because of the nature of the combs but it was a good experience for me and I was able to give out admin accounts to my peers who wanted to do things like implement a <a href="https://github.com/Whopper92/CombsBot">CombsBot</a> for IRC that could be queried for who owned what IP address. I'm pretty happy with it.



